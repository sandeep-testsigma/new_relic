{"version":3,"file":"index-DI1ea1qP.js","sources":["../../node_modules/@newrelic/browser-agent/src/common/dom/selector-path.js","../../node_modules/@newrelic/browser-agent/src/features/generic_events/aggregate/user-actions/aggregated-user-action.js","../../node_modules/@newrelic/browser-agent/src/features/generic_events/aggregate/user-actions/user-actions-aggregator.js","../../node_modules/@newrelic/browser-agent/src/features/generic_events/aggregate/index.js"],"sourcesContent":["/**\n * Copyright 2020-2025 New Relic, Inc. All rights reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * Generates a CSS selector path for the given element, if possible\n * @param {HTMLElement} elem\n * @param {boolean} includeId\n * @param {boolean} includeClass\n * @returns {string|undefined}\n */\nexport const generateSelectorPath = (elem, targetFields = []) => {\n  if (!elem) return { path: undefined, nearestFields: {} }\n\n  const getNthOfTypeIndex = (node) => {\n    try {\n      let i = 1\n      const { tagName } = node\n      while (node.previousElementSibling) {\n        if (node.previousElementSibling.tagName === tagName) i++\n        node = node.previousElementSibling\n      }\n      return i\n    } catch (err) {\n    // do nothing for now.  An invalid child count will make the path selector not return a nth-of-type selector statement\n    }\n  }\n\n  let pathSelector = ''\n  let index = getNthOfTypeIndex(elem)\n\n  const nearestFields = {}\n  try {\n    while (elem?.tagName) {\n      const { id, localName } = elem\n      targetFields.forEach(field => { nearestFields[nearestAttrName(field)] ||= (elem[field]?.baseVal || elem[field]) })\n      const selector = [\n        localName,\n        id ? `#${id}` : '',\n        pathSelector ? `>${pathSelector}` : ''\n      ].join('')\n\n      pathSelector = selector\n      elem = elem.parentNode\n    }\n  } catch (err) {\n  // do nothing for now\n  }\n\n  const path = pathSelector ? index ? `${pathSelector}:nth-of-type(${index})` : pathSelector : undefined\n  return { path, nearestFields }\n\n  function nearestAttrName (originalFieldName) {\n    /** preserve original renaming structure for pre-existing field maps */\n    if (originalFieldName === 'tagName') originalFieldName = 'tag'\n    if (originalFieldName === 'className') originalFieldName = 'class'\n    return `nearest${originalFieldName.charAt(0).toUpperCase() + originalFieldName.slice(1)}`\n  }\n}\n","/**\n * Copyright 2020-2025 New Relic, Inc. All rights reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { RAGE_CLICK_THRESHOLD_EVENTS, RAGE_CLICK_THRESHOLD_MS } from '../../constants'\nimport { cleanURL } from '../../../../common/url/clean-url'\n\nexport class AggregatedUserAction {\n  constructor (evt, selectorPath, nearestTargetFields) {\n    this.event = evt\n    this.count = 1\n    this.originMs = Math.floor(evt.timeStamp)\n    this.relativeMs = [0]\n    this.selectorPath = selectorPath\n    this.rageClick = undefined\n    this.nearestTargetFields = nearestTargetFields\n    this.currentUrl = cleanURL('' + location)\n  }\n\n  /**\n   * Aggregates the count and maintains the relative MS array for matching events\n   * Will determine if a rage click was observed as part of the aggregation\n   * @param {Event} evt\n   * @returns {void}\n   */\n  aggregate (evt) {\n    this.count++\n    this.relativeMs.push(Math.floor(evt.timeStamp - this.originMs))\n    if (this.isRageClick()) this.rageClick = true\n  }\n\n  /**\n   * Determines if the current set of relative ms values constitutes a rage click\n   * @returns {boolean}\n   */\n  isRageClick () {\n    const len = this.relativeMs.length\n    return (this.event.type === 'click' && len >= RAGE_CLICK_THRESHOLD_EVENTS && this.relativeMs[len - 1] - this.relativeMs[len - RAGE_CLICK_THRESHOLD_EVENTS] < RAGE_CLICK_THRESHOLD_MS)\n  }\n}\n","/**\n * Copyright 2020-2025 New Relic, Inc. All rights reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { generateSelectorPath } from '../../../../common/dom/selector-path'\nimport { OBSERVED_WINDOW_EVENTS } from '../../constants'\nimport { AggregatedUserAction } from './aggregated-user-action'\n\nexport class UserActionsAggregator {\n  /** @type {AggregatedUserAction=} */\n  #aggregationEvent = undefined\n  #aggregationKey = ''\n\n  get aggregationEvent () {\n    // if this is accessed externally, we need to be done aggregating on it\n    // to prevent potential mutability and duplication issues, so the state is cleared upon returning.\n    // This value may need to be accessed during an unload harvest.\n    const finishedEvent = this.#aggregationEvent\n    this.#aggregationKey = ''\n    this.#aggregationEvent = undefined\n    return finishedEvent\n  }\n\n  /**\n   * Process the event and determine if a new aggregation set should be made or if it should increment the current aggregation\n   * @param {Event} evt The event supplied by the addEventListener callback\n   * @returns {AggregatedUserAction|undefined} The previous aggregation set if it has been completed by processing the current event\n   */\n  process (evt, targetFields) {\n    if (!evt) return\n    const { selectorPath, nearestTargetFields } = getSelectorPath(evt, targetFields)\n    const aggregationKey = getAggregationKey(evt, selectorPath)\n    if (!!aggregationKey && aggregationKey === this.#aggregationKey) {\n      // an aggregation exists already, so lets just continue to increment\n      this.#aggregationEvent.aggregate(evt)\n    } else {\n      // return the prev existing one (if there is one)\n      const finishedEvent = this.#aggregationEvent\n      // then set as this new event aggregation\n      this.#aggregationKey = aggregationKey\n      this.#aggregationEvent = new AggregatedUserAction(evt, selectorPath, nearestTargetFields)\n      return finishedEvent\n    }\n  }\n}\n\n/**\n * Generates a selector path for the event, starting with simple cases like window or document and getting more complex for dom-tree traversals as needed.\n * Will return a random selector path value if no other path can be determined, to force the aggregator to skip aggregation for this event.\n * @param {Event} evt\n * @returns {string}\n */\nfunction getSelectorPath (evt, targetFields) {\n  let selectorPath; let nearestTargetFields = {}\n  if (OBSERVED_WINDOW_EVENTS.includes(evt.type) || evt.target === window) selectorPath = 'window'\n  else if (evt.target === document) selectorPath = 'document'\n  // if still no selectorPath, generate one from target tree that includes elem ids\n  else {\n    const { path, nearestFields } = generateSelectorPath(evt.target, targetFields)\n    selectorPath = path\n    nearestTargetFields = nearestFields\n  }\n  // if STILL no selectorPath, it will return undefined which will skip aggregation for this event\n  return { selectorPath, nearestTargetFields }\n}\n\n/**\n * Returns an aggregation key based on the event type and the selector path of the event's target.\n * Scrollend events are aggregated into one set, no matter what.\n * @param {Event} evt\n * @param {string} selectorPath\n * @returns {string}\n */\nfunction getAggregationKey (evt, selectorPath) {\n  let aggregationKey = evt.type\n  /** aggregate all scrollends into one set (if sequential), no matter what their target is\n   * the aggregation group's selector path with be reflected as the first one observed\n   * due to the way the aggregation logic works (by storing the initial value and aggregating it) */\n  if (evt.type !== 'scrollend') aggregationKey += '-' + selectorPath\n  return aggregationKey\n}\n","/**\n * Copyright 2020-2025 New Relic, Inc. All rights reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { stringify } from '../../../common/util/stringify'\nimport { cleanURL } from '../../../common/url/clean-url'\nimport { FEATURE_NAME, RESERVED_EVENT_TYPES } from '../constants'\nimport { globalScope, initialLocation, isBrowserScope } from '../../../common/constants/runtime'\nimport { AggregateBase } from '../../utils/aggregate-base'\nimport { warn } from '../../../common/util/console'\nimport { now } from '../../../common/timing/now'\nimport { registerHandler } from '../../../common/event-emitter/register-handler'\nimport { SUPPORTABILITY_METRIC_CHANNEL } from '../../metrics/constants'\nimport { applyFnToProps } from '../../../common/util/traverse'\nimport { UserActionsAggregator } from './user-actions/user-actions-aggregator'\nimport { isIFrameWindow } from '../../../common/dom/iframe'\nimport { isPureObject } from '../../../common/util/type-check'\n\nexport class Aggregate extends AggregateBase {\n  static featureName = FEATURE_NAME\n  constructor (agentRef) {\n    super(agentRef, FEATURE_NAME)\n    this.eventsPerHarvest = 1000\n    this.referrerUrl = (isBrowserScope && document.referrer) ? cleanURL(document.referrer) : undefined\n\n    this.waitForFlags(['ins']).then(([ins]) => {\n      if (!ins) {\n        this.blocked = true\n        this.deregisterDrain()\n        return\n      }\n\n      this.trackSupportabilityMetrics()\n\n      registerHandler('api-recordCustomEvent', (timestamp, eventType, attributes) => {\n        if (RESERVED_EVENT_TYPES.includes(eventType)) return warn(46)\n        this.addEvent({\n          eventType,\n          timestamp: this.toEpoch(timestamp),\n          ...attributes\n        })\n      }, this.featureName, this.ee)\n\n      if (agentRef.init.page_action.enabled) {\n        registerHandler('api-addPageAction', (timestamp, name, attributes, targetEntityGuid) => {\n          if (!this.agentRef.runtime.entityManager.get(targetEntityGuid)) return warn(56, this.featureName)\n          this.addEvent({\n            ...attributes,\n            eventType: 'PageAction',\n            timestamp: this.toEpoch(timestamp),\n            timeSinceLoad: timestamp / 1000,\n            actionName: name,\n            referrerUrl: this.referrerUrl,\n            ...(isBrowserScope && {\n              browserWidth: window.document.documentElement?.clientWidth,\n              browserHeight: window.document.documentElement?.clientHeight\n            })\n          }, targetEntityGuid)\n        }, this.featureName, this.ee)\n      }\n\n      let addUserAction = () => { /** no-op */ }\n      if (isBrowserScope && agentRef.init.user_actions.enabled) {\n        this.userActionAggregator = new UserActionsAggregator()\n        this.harvestOpts.beforeUnload = () => addUserAction?.(this.userActionAggregator.aggregationEvent)\n\n        addUserAction = (aggregatedUserAction) => {\n          try {\n            /** The aggregator process only returns an event when it is \"done\" aggregating -\n             * so we still need to validate that an event was given to this method before we try to add */\n            if (aggregatedUserAction?.event) {\n              const { target, timeStamp, type } = aggregatedUserAction.event\n              this.addEvent({\n                eventType: 'UserAction',\n                timestamp: this.toEpoch(timeStamp),\n                action: type,\n                actionCount: aggregatedUserAction.count,\n                actionDuration: aggregatedUserAction.relativeMs[aggregatedUserAction.relativeMs.length - 1],\n                actionMs: aggregatedUserAction.relativeMs,\n                rageClick: aggregatedUserAction.rageClick,\n                target: aggregatedUserAction.selectorPath,\n                currentUrl: aggregatedUserAction.currentUrl,\n                ...(isIFrameWindow(window) && { iframe: true }),\n                ...(this.agentRef.init.user_actions.elementAttributes.reduce((acc, field) => {\n                  /** prevent us from capturing an obscenely long value */\n                  if (canTrustTargetAttribute(field)) acc[targetAttrName(field)] = String(target[field]).trim().slice(0, 128)\n                  return acc\n                }, {})),\n                ...aggregatedUserAction.nearestTargetFields\n              })\n\n              /**\n               * Returns the original target field name with `target` prepended and camelCased\n               * @param {string} originalFieldName\n               * @returns {string} the target field name\n               */\n              function targetAttrName (originalFieldName) {\n                /** preserve original renaming structure for pre-existing field maps */\n                if (originalFieldName === 'tagName') originalFieldName = 'tag'\n                if (originalFieldName === 'className') originalFieldName = 'class'\n                /** return the original field name, cap'd and prepended with target to match formatting */\n                return `target${originalFieldName.charAt(0).toUpperCase() + originalFieldName.slice(1)}`\n              }\n\n              /**\n               * Only trust attributes that exist on HTML element targets, which excludes the window and the document targets\n               * @param {string} attribute The attribute to check for on the target element\n               * @returns {boolean} Whether the target element has the attribute and can be trusted\n               */\n              function canTrustTargetAttribute (attribute) {\n                return !!(aggregatedUserAction.selectorPath !== 'window' && aggregatedUserAction.selectorPath !== 'document' && target instanceof HTMLElement && target?.[attribute])\n              }\n            }\n          } catch (e) {\n            // do nothing for now\n          }\n        }\n\n        registerHandler('ua', (evt) => {\n          /** the processor will return the previously aggregated event if it has been completed by processing the current event */\n          addUserAction(this.userActionAggregator.process(evt, this.agentRef.init.user_actions.elementAttributes))\n        }, this.featureName, this.ee)\n      }\n\n      /**\n       * is it worth complicating the agent and skipping the POs for single repeating queries? maybe,\n       * but right now it was less desirable simply because it is a nice benefit of populating the event buffer\n       * immediately as events happen for payload evaluation purposes and that becomes a little more chaotic\n       * with an arbitrary query method. note: eventTypes: [...types] does not support the 'buffered' flag so we have\n       * to create up to two PO's here.\n       */\n      const performanceTypesToCapture = [...(agentRef.init.performance.capture_marks ? ['mark'] : []), ...(agentRef.init.performance.capture_measures ? ['measure'] : [])]\n      if (performanceTypesToCapture.length) {\n        try {\n          performanceTypesToCapture.forEach(type => {\n            if (PerformanceObserver.supportedEntryTypes.includes(type)) {\n              const observer = new PerformanceObserver((list) => {\n                list.getEntries().forEach(entry => {\n                  try {\n                    this.reportSupportabilityMetric('Generic/Performance/' + type + '/Seen')\n                    const detailObj = agentRef.init.performance.capture_detail ? createDetailAttrs(entry.detail) : {}\n                    this.addEvent({\n                      ...detailObj,\n                      eventType: 'BrowserPerformance',\n                      timestamp: this.toEpoch(entry.startTime),\n                      entryName: entry.name,\n                      entryDuration: entry.duration,\n                      entryType: type\n                    })\n\n                    function createDetailAttrs (detail) {\n                      if (detail === null || detail === undefined) return {}\n                      else if (!isPureObject(detail)) return { entryDetail: detail }\n                      else return flattenJSON(detail)\n\n                      function flattenJSON (nestedJSON, parentKey = 'entryDetail') {\n                        let items = {}\n                        if (nestedJSON === null || nestedJSON === undefined) return items\n                        Object.keys(nestedJSON).forEach(key => {\n                          let newKey = parentKey + '.' + key\n                          if (isPureObject(nestedJSON[key])) {\n                            Object.assign(items, flattenJSON(nestedJSON[key], newKey))\n                          } else {\n                            if (nestedJSON[key] !== null && nestedJSON[key] !== undefined) items[newKey] = nestedJSON[key]\n                          }\n                        })\n                        return items\n                      }\n                    }\n                  } catch (err) {\n                  }\n                })\n              })\n              observer.observe({ buffered: true, type })\n            }\n          })\n        } catch (err) {\n        // Something failed in our set up, likely the browser does not support PO's... do nothing\n        }\n      }\n\n      if (isBrowserScope && agentRef.init.performance.resources.enabled) {\n        registerHandler('browserPerformance.resource', (entry) => {\n          try {\n            // convert the entry to a plain object and separate the name and duration from the object\n            // you need to do this to be able to spread it into the addEvent call later, and name and duration\n            // would be duplicative of entryName and entryDuration and are protected keys in NR1\n            const { name, duration, ...entryObject } = entry.toJSON()\n\n            let firstParty = false\n            try {\n              const entryDomain = new URL(name).hostname\n              const isNr = (entryDomain.includes('newrelic.com') || entryDomain.includes('nr-data.net') || entryDomain.includes('nr-local.net'))\n              /** decide if we should ignore nr-specific assets */\n              if (this.agentRef.init.performance.resources.ignore_newrelic && isNr) return\n              /** decide if we should ignore the asset type (empty means allow everything, which is the default) */\n              if (this.agentRef.init.performance.resources.asset_types.length && !this.agentRef.init.performance.resources.asset_types.includes(entryObject.initiatorType)) return\n              /** decide if the entryDomain is a first party domain */\n              firstParty = entryDomain === globalScope?.location.hostname || agentRef.init.performance.resources.first_party_domains.includes(entryDomain)\n              if (firstParty) this.reportSupportabilityMetric('Generic/Performance/FirstPartyResource/Seen')\n              if (isNr) this.reportSupportabilityMetric('Generic/Performance/NrResource/Seen')\n            } catch (err) {\n            // couldnt parse the URL, so firstParty will just default to false\n            }\n\n            this.reportSupportabilityMetric('Generic/Performance/Resource/Seen')\n            const event = {\n              ...entryObject,\n              eventType: 'BrowserPerformance',\n              timestamp: Math.floor(agentRef.runtime.timeKeeper.correctRelativeTimestamp(entryObject.startTime)),\n              entryName: cleanURL(name),\n              entryDuration: duration,\n              firstParty\n            }\n\n            this.addEvent(event)\n          } catch (err) {\n            this.ee.emit('internal-error', [err, 'GenericEvents-Resource'])\n          }\n        }, this.featureName, this.ee)\n      }\n\n      registerHandler('api-measure', (args, n) => {\n        const { start, duration, customAttributes } = args\n\n        const event = {\n          ...customAttributes,\n          eventType: 'BrowserPerformance',\n          timestamp: Math.floor(agentRef.runtime.timeKeeper.correctRelativeTimestamp(start)),\n          entryName: n,\n          entryDuration: duration,\n          entryType: 'measure'\n        }\n\n        this.addEvent(event)\n      }, this.featureName, this.ee)\n\n      agentRef.runtime.harvester.triggerHarvestFor(this)\n      this.drain()\n    })\n  }\n\n  // WARNING: Insights times are in seconds. EXCEPT timestamp, which is in ms.\n  /** Some keys are set by the query params or request headers sent with the harvest and override the body values, so check those before adding new standard body values...\n   * see harvest.js#baseQueryString for more info on the query params\n   * Notably:\n   * * name: set by the `t=` query param\n   * * appId: set by the `a=` query param\n   * * standalone: set by the `sa=` query param\n   * * session: set by the `s=` query param\n   * * sessionTraceId: set by the `ptid=` query param\n   * * userAgent*: set by the userAgent header\n   * @param {object=} obj the event object for storing in the event buffer\n   * @param {string=} targetEntityGuid the target entity guid for the event to scope buffering and harvesting. Defaults to agent config if undefined\n   * @returns void\n   */\n  addEvent (obj = {}, targetEntityGuid) {\n    if (!obj || !Object.keys(obj).length) return\n    if (!obj.eventType) {\n      warn(44)\n      return\n    }\n\n    for (let key in obj) {\n      let val = obj[key]\n      obj[key] = (val && typeof val === 'object' ? stringify(val) : val)\n    }\n\n    const defaultEventAttributes = {\n      /** should be overridden by the event-specific attributes, but just in case -- set it to now() */\n      timestamp: Math.floor(this.agentRef.runtime.timeKeeper.correctRelativeTimestamp(now())),\n      /** all generic events require pageUrl(s) */\n      pageUrl: cleanURL('' + initialLocation),\n      currentUrl: cleanURL('' + location)\n    }\n\n    const eventAttributes = {\n      /** Agent-level custom attributes */\n      ...(this.agentRef.info.jsAttributes || {}),\n      /** Fallbacks for required properties in-case the event did not supply them, should take precedence over agent-level custom attrs */\n      ...defaultEventAttributes,\n      /** Event-specific attributes take precedence over agent-level custom attributes and fallbacks */\n      ...obj\n    }\n\n    const addedEvent = this.events.add(eventAttributes, targetEntityGuid)\n    if (!addedEvent && !this.events.isEmpty(undefined, targetEntityGuid)) {\n      /** could not add the event because it pushed the buffer over the limit\n       * so we harvest early, and try to add it again now that the buffer is cleared\n       * if it fails again, we do nothing\n       */\n      this.ee.emit(SUPPORTABILITY_METRIC_CHANNEL, ['GenericEvents/Harvest/Max/Seen'])\n      this.agentRef.runtime.harvester.triggerHarvestFor(this, { targetEntityGuid })\n      this.events.add(eventAttributes)\n    }\n  }\n\n  serializer (eventBuffer) {\n    return applyFnToProps({ ins: eventBuffer }, this.obfuscator.obfuscateString.bind(this.obfuscator), 'string')\n  }\n\n  queryStringsBuilder () {\n    return { ua: this.agentRef.info.userAttributes, at: this.agentRef.info.atts }\n  }\n\n  toEpoch (timestamp) {\n    return Math.floor(this.agentRef.runtime.timeKeeper.correctRelativeTimestamp(timestamp))\n  }\n\n  trackSupportabilityMetrics () {\n    /** track usage SMs to improve these experimental features */\n    const configPerfTag = 'Config/Performance/'\n    if (this.agentRef.init.performance.capture_marks) this.reportSupportabilityMetric(configPerfTag + 'CaptureMarks/Enabled')\n    if (this.agentRef.init.performance.capture_measures) this.reportSupportabilityMetric(configPerfTag + 'CaptureMeasures/Enabled')\n    if (this.agentRef.init.performance.resources.enabled) this.reportSupportabilityMetric(configPerfTag + 'Resources/Enabled')\n    if (this.agentRef.init.performance.resources.asset_types?.length !== 0) this.reportSupportabilityMetric(configPerfTag + 'Resources/AssetTypes/Changed')\n    if (this.agentRef.init.performance.resources.first_party_domains?.length !== 0) this.reportSupportabilityMetric(configPerfTag + 'Resources/FirstPartyDomains/Changed')\n    if (this.agentRef.init.performance.resources.ignore_newrelic === false) this.reportSupportabilityMetric(configPerfTag + 'Resources/IgnoreNewrelic/Changed')\n  }\n}\n"],"names":["generateSelectorPath","elem","targetFields","getNthOfTypeIndex","node","i","tagName","pathSelector","index","nearestFields","id","localName","field","nearestAttrName","originalFieldName","AggregatedUserAction","evt","selectorPath","nearestTargetFields","cleanURL","len","RAGE_CLICK_THRESHOLD_EVENTS","RAGE_CLICK_THRESHOLD_MS","UserActionsAggregator","#aggregationEvent","#aggregationKey","finishedEvent","getSelectorPath","aggregationKey","getAggregationKey","OBSERVED_WINDOW_EVENTS","path","Aggregate","AggregateBase","FEATURE_NAME","agentRef","isBrowserScope","ins","registerHandler","timestamp","eventType","attributes","RESERVED_EVENT_TYPES","warn","name","targetEntityGuid","addUserAction","aggregatedUserAction","targetAttrName","canTrustTargetAttribute","attribute","target","timeStamp","type","isIFrameWindow","acc","performanceTypesToCapture","list","entry","createDetailAttrs","detail","isPureObject","flattenJSON","nestedJSON","parentKey","items","key","newKey","detailObj","duration","entryObject","firstParty","entryDomain","isNr","globalScope","event","err","args","n","start","customAttributes","obj","val","stringify","defaultEventAttributes","now","initialLocation","eventAttributes","SUPPORTABILITY_METRIC_CHANNEL","eventBuffer","applyFnToProps","configPerfTag"],"mappings":"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","x_google_ignoreList":[0,1,2,3]}