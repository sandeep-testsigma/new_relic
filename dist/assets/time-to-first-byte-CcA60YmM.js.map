{"version":3,"file":"time-to-first-byte-CcA60YmM.js","sources":["../../node_modules/@newrelic/browser-agent/dist/esm/common/vitals/time-to-first-byte.js"],"sourcesContent":["/**\n * Copyright 2020-2025 New Relic, Inc. All rights reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { globalScope, isBrowserScope, isiOS, originTime } from '../constants/runtime';\nimport { VITAL_NAMES } from './constants';\nimport { VitalMetric } from './vital-metric';\nimport { onTTFB } from 'web-vitals/attribution';\nexport const timeToFirstByte = new VitalMetric(VITAL_NAMES.TIME_TO_FIRST_BYTE);\n\n/**\n * onTTFB is not supported in the following scenarios:\n * - in a non-browser scope\n * - in browsers that do not support PerformanceNavigationTiming API\n * - in an iOS browser\n * - cross-origin iframes specifically in firefox and safari\n */\nif (isBrowserScope && typeof PerformanceNavigationTiming !== 'undefined' && !isiOS && window === window.parent) {\n  onTTFB(({\n    value,\n    attribution\n  }) => {\n    if (timeToFirstByte.isValid) return;\n    timeToFirstByte.update({\n      value,\n      attrs: {\n        navigationEntry: attribution.navigationEntry\n      }\n    });\n  });\n} else {\n  if (!timeToFirstByte.isValid) {\n    const entry = {};\n    // convert real timestamps to relative timestamps to match web-vitals behavior\n    for (let key in globalScope?.performance?.timing || {}) entry[key] = Math.max(globalScope?.performance?.timing[key] - originTime, 0);\n\n    // ttfb is equiv to document's responseStart property in timing API --> https://developer.mozilla.org/en-US/docs/Web/API/PerformanceTiming/responseStart\n    timeToFirstByte.update({\n      value: entry.responseStart,\n      attrs: {\n        navigationEntry: entry\n      }\n    });\n  }\n}"],"names":["timeToFirstByte","VitalMetric","VITAL_NAMES","isBrowserScope","isiOS","onTTFB","value","attribution","entry","key","globalScope","originTime"],"mappings":"qHAQY,MAACA,EAAkB,IAAIC,EAAYC,EAAY,kBAAkB,EAS7E,GAAIC,GAAkB,OAAO,4BAAgC,KAAe,CAACC,GAAS,SAAW,OAAO,OACtGC,EAAO,CAAC,CACN,MAAAC,EACA,YAAAC,CACJ,IAAQ,CACAP,EAAgB,SACpBA,EAAgB,OAAO,CACrB,MAAAM,EACA,MAAO,CACL,gBAAiBC,EAAY,eACrC,CACA,CAAK,CACL,CAAG,UAEG,CAACP,EAAgB,QAAS,CAC5B,MAAMQ,EAAQ,CAAA,EAEd,QAASC,KAAOC,GAAa,aAAa,QAAU,CAAA,EAAIF,EAAMC,CAAG,EAAI,KAAK,IAAIC,GAAa,aAAa,OAAOD,CAAG,EAAIE,EAAY,CAAC,EAGnIX,EAAgB,OAAO,CACrB,MAAOQ,EAAM,cACb,MAAO,CACL,gBAAiBA,CACzB,CACA,CAAK,CACL","x_google_ignoreList":[0]}