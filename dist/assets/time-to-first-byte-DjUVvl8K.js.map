{"version":3,"file":"time-to-first-byte-DjUVvl8K.js","sources":["../../node_modules/@newrelic/browser-agent/src/common/vitals/time-to-first-byte.js"],"sourcesContent":["/**\n * Copyright 2020-2025 New Relic, Inc. All rights reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { globalScope, isBrowserScope, isiOS, originTime } from '../constants/runtime'\nimport { VITAL_NAMES } from './constants'\nimport { VitalMetric } from './vital-metric'\nimport { onTTFB } from 'web-vitals/attribution'\n\nexport const timeToFirstByte = new VitalMetric(VITAL_NAMES.TIME_TO_FIRST_BYTE)\n\n/**\n * onTTFB is not supported in the following scenarios:\n * - in a non-browser scope\n * - in browsers that do not support PerformanceNavigationTiming API\n * - in an iOS browser\n * - cross-origin iframes specifically in firefox and safari\n */\nif (isBrowserScope && typeof PerformanceNavigationTiming !== 'undefined' && !isiOS && window === window.parent) {\n  onTTFB(({ value, attribution }) => {\n    if (timeToFirstByte.isValid) return\n    timeToFirstByte.update({ value, attrs: { navigationEntry: attribution.navigationEntry } })\n  })\n} else {\n  if (!timeToFirstByte.isValid) {\n    const entry = {}\n    // convert real timestamps to relative timestamps to match web-vitals behavior\n    for (let key in globalScope?.performance?.timing || {}) entry[key] = Math.max(globalScope?.performance?.timing[key] - originTime, 0)\n\n    // ttfb is equiv to document's responseStart property in timing API --> https://developer.mozilla.org/en-US/docs/Web/API/PerformanceTiming/responseStart\n    timeToFirstByte.update({ value: entry.responseStart, attrs: { navigationEntry: entry } })\n  }\n}\n"],"names":["timeToFirstByte","VitalMetric","VITAL_NAMES","isBrowserScope","isiOS","onTTFB","value","attribution","entry","key","globalScope","originTime"],"mappings":"qHASY,MAACA,EAAkB,IAAIC,EAAYC,EAAY,kBAAkB,EAS7E,GAAIC,GAAkB,OAAO,4BAAgC,KAAe,CAACC,GAAS,SAAW,OAAO,OACtGC,EAAO,CAAC,CAAE,MAAAC,EAAO,YAAAC,KAAkB,CAC7BP,EAAgB,SACpBA,EAAgB,OAAO,CAAE,MAAAM,EAAO,MAAO,CAAE,gBAAiBC,EAAY,gBAAiB,CAAE,CAC7F,CAAG,UAEG,CAACP,EAAgB,QAAS,CAC5B,MAAMQ,EAAQ,CAAA,EAEd,QAASC,KAAOC,GAAa,aAAa,QAAU,CAAA,EAAIF,EAAMC,CAAG,EAAI,KAAK,IAAIC,GAAa,aAAa,OAAOD,CAAG,EAAIE,EAAY,CAAC,EAGnIX,EAAgB,OAAO,CAAE,MAAOQ,EAAM,cAAe,MAAO,CAAE,gBAAiBA,EAAO,CAAE,CAC5F","x_google_ignoreList":[0]}